@model MultiModels
@{
    ViewData["Title"] = "Checkout";
    Layout = "~/Views/Shared/_HomePage.cshtml";
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css"
        type="text/css">


    <style>
        .invalid-field {
            border-color: #ff0000;
        }

        .error-message {
            color: #ff0000;
            font-size: 0.8rem;
        }



        .dathangButon:hover {
            background-color: rgb(255, 0, 64);
            color: white;
        }

        .input-group {
            --primary: #74e3ff;
        }

        .input {
            all: unset;
            color: #000000;
            padding: 1rem;
            border: 1px solid #9e9e9e;
            border-radius: 20px;
            transition: 150ms cubic-bezier(1, 1, 1, 1);

        }

        .label {
            position: absolute;
            top: 1rem;
            left: 1rem;
            color: #d4d4d4;
            pointer-events: none;
            transition: 150ms cubic-bezier(0.4, 0, 0.2, 1);

        }


        .input:focus {
            border: 1px solid var(--primary);
        }

        .input:focus~label,
        .input:valid~label {
            transform: translateY(-120%) scale(0.7);
            background-color: #ffffff;
            padding-inline: 0.1rem;
            color: var(--primary);
        }

        body {
            font-size: small;
        }
    </style>
</head>

<body style="font-family: Arial, Helvetica, sans-serif;">
    <div class="container col-10 my-5 br-2 rounded">
        <h3
            style="color: #3e3e3e; font-family: Arial, Helvetica, sans-serif; font-size: 27px; font-weight: 700; text-transform: uppercase; margin-bottom: 20px">
            Group4 Store</h3>
        <form class="row g-3" asp-action="PayProduct" method="post">
            @{
                string[] getCheckBoxValues = ViewBag.GetCheckArray;
                int accId = ViewBag.GetAccID;
                decimal amount = 0;
            }
            <div class="col-4 order-md-last">
                <h6 class="d-flex justify-content-between align-item-center">
                    <span class="text-muted">Đơn hàng</span>
                    <span class="badge bg-secondary rounded-pill">@getCheckBoxValues.Length</span>
                </h6>

                <ul class="list-group">
                    @for (int i = 0; i < getCheckBoxValues.Length; i++)
                    {
                        int proID = int.Parse(getCheckBoxValues[i]);
                        var getCart = Model.cartList.SingleOrDefault(ca => ca.AccId == accId && ca.ProId == proID);
                        var getPro = Model.productList.SingleOrDefault(p => p.ProId == proID);
                        <li class="list-group-item d-flex justify-content-between">
                            <img src="~/images/Lovecake.png" style="width: 15%;" alt="">
                            <div>
                                <h6>@getPro.ProName</h6>
                                <span class="text-muted">@getPro.Brand</span>
                            </div>
                            @if (getPro.Discount != 0)
                            {
                                amount += getPro.Discount * getCart.ProQuantity;
                                <span class="text-muted">@(getPro.Discount * getCart.ProQuantity) đ</span>
                            }
                            else
                            {
                                amount += getPro.ProPrice * getCart.ProQuantity;
                                <span class="text-muted">@(getPro.ProPrice * getCart.ProQuantity)đ</span>
                            }
                        </li>
                    }
                </ul>

                <hr>
                <li class="d-flex justify-content-between">
                    <div>
                        <h6>Tổng cộng</h6>
                    </div>
                    <input type="hidden" asp-for="getOrder.TotalPrice" value="@amount">
                    <h4 style="color: #ee4d2d;">@amount đ </h4>
                </li>
                <br>
                <div style="display: flex; align-items: center; justify-content: space-evenly">
                    <a style="text-decoration: none;" href="/HomeController">
                        < Quay về trang chủ</a>

                            <button name="payBtn" type="submit" class="dathangButon mb-4"
                                style="width: 50%; height: 40px;background-color: #ee4d2d; color: #fff; outline: none; border: none"
                                onclick="validateForm()">ĐẶT HÀNG</button>
                </div>
            </div>

            <div class="col-8">
                <div class="row">
                    <div class="col-6">
                        <h6>Thông tin giao hàng</h6>
                        @if (Model.getAccount != null)
                        {
                            <div id="checkoutForm" onsubmit="return false;">
                                <div>
                                    <div class="col-12" style="padding-bottom: 15px;">
                                        <div class="input-group">
                                            <input readonly="" name="fullname" class="input" required type="text"
                                                id="username" value="@Model.getAccount.Fullname" style="width: 100%;">
                                        </div>
                                        <div class="error-message" id="username-error"></div>
                                    </div>
                                    <div class="col-12" style="padding-bottom: 15px;">
                                        <div class="input-group">
                                            <input readonly="" name="phonenumber" class="input" required type="tel"
                                                id="phone" value="@Model.getAccount.PhoneNumber" style="width: 100%;">
                                        </div>
                                        <div class="error-message" id="phone-error"></div>
                                    </div>
                                    <div class="col-12" style="padding-bottom: 15px;">
                                        <div class="input-group">
                                            <input readonly="" name="email" class="input" required type="email" id="email"
                                                value="@Model.getAccount.Email" style="width: 100%;">
                                        </div>
                                        <div class="error-message" id="email-error"></div>
                                    </div>
                                    <div class="col-12" style="padding-bottom: 15px;">
                                        <div class="input-group">
                                            <input class="input" required type="text" asp-for="getOrder.Address"
                                                style="width: 100%;">
                                            <label class="label" for="address">Address</label>
                                        </div>
                                        <div class="error-message" id="address-error"></div>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>


                    <div class="col-6">
                        <h6>Vận chuyển</h6>
                        <div class="form-check">
                            <li class="list-group-item d-flex justify-content-between">
                                <div>
                                    <!-- <input type="checkbox" class="form-check-input cod" name="paymentMethod"> -->
                                    <h6 class="text-success">Giao hàng tận nhà</h6>
                                </div>
                            </li>
                        </div>


                        <h6 style="padding-top: 50px;">Thanh toán</h6>

                        <div class="form-check">
                            <li class="list-group-item d-flex justify-content-between">
                                <div>
                                    <input type="radio" class="form-check-input cod" asp-for="getOrder.Payment"
                                        value="COD" checked>
                                    <label class="form-check-label">Thanh toán COD</label>
                                </div>
                                <img src="https://th.bing.com/th/id/R.8ea4398b8e3f3bd9243156d01387c4e2?rik=73MFykivpgJj2w&pid=ImgRaw&r=0"
                                    alt="" style="width: 10%;">
                            </li>
                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </form>
        <hr>
    </div>
    <script src="~/js/checkOutForm.js"></script>
</body>

</html>