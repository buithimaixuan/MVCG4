@model MultiModels
@{
    ViewData["Title"] = "ViewOrderDetailByCusID";
    Layout = "~/Views/Shared/_HomePage.cshtml";
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="~/css/OrderDetailCusVer2Style.css">
    <script src="https://kit.fontawesome.com/1bd9fa3a2e.js" crossorigin="anonymous"></script>
</head>

<body>
    <main class="mt-3">
        <section class="content">
            <aside>
                <div class="top_aside">
                    <div class="avatar_aside">
                        <a href="#">
                            <img src="~/images/Lovecake.png" alt="">
                        </a>
                    </div>
                    <div class="infor_aside">
                        <span>@Model.getAccount.Fullname</span>
                        <span href="#"><i class="fa-solid fa-pen"></i>@Model.getAccount.PhoneNumber</span>
                    </div>
                </div>
                <ul>
                    <li>
                        <a asp-controller="Order" asp-action="ViewListOrder"><i class="fa-solid fa-rectangle-list"></i> Đơn
                            mua</a>
                    </li>
                </ul>
            </aside>

            <section class="o_detail">
                <div class="top_o_detail">
                    <div class="chitiet">
                        <h4>Chi tiết đơn hàng</h4>
                    </div>
                    @if (Model.getAccount != null && Model.getOrder != null)
                    {
                        <div class="thongtin">
                            <div class="user_infor_o_detail">
                                <p class="label_order">Người đặt hàng: <span>@Model.getAccount.Fullname</span></p>
                                <p class="label_order">Địa chỉ: <span>@Model.getOrder.Address</span></p>
                                <p class="label_order">Số điện thoại: <span>@Model.getAccount.PhoneNumber</span></p>
                            </div>
                            <div class="order_infor_o_detail">
                                <p class="label_order">Mã đơn hàng: <span>@Model.getOrder.OId</span></p>
                                <p class="label_order">Ngày đặt hàng: <span>@Model.getOrder.ODate</span></p>
                                <p class="label_order">Số lượng: <span>@Model.orderDtList.Count()</span></p>
                                <p class="label_order">Phương thức thanh toán: <span
                                        class="phuongthuc">@Model.getOrder.Payment</span></p>
                                <p class="label_order">
                                    Trạng thái:
                                    <span class="trangthai">
                                        @Model.getOrder.Status
                                    </span>
                                </p>
                            </div>
                        </div>
                    }
                </div>

                <div class="bot_o_detail">
                    <h2>Danh sách đơn hàng</h2>
                    <div class="danhsachsanpham">
                        <!-- CARD -->
                        @foreach (var elem in Model.orderDtList)
                        {
                            var pro = Model.productList.SingleOrDefault(p => p.ProId == elem.ProId);
                            var cat = Model.categoryList.SingleOrDefault(ca => ca.CatId == pro.CatId);
                            <div class="sanpham">
                                <div class="thongtinsanpham">
                                    <div class="anhsanpham">
                                        <img src="~/@pro.ProImage" alt="">
                                    </div>
                                    <div class="thongtinconlai">
                                        <h3>
                                            @pro.ProName
                                        </h3>
                                        <p>The loai: <span>
                                                @cat.CatName
                                            </span></p>
                                        <p>So luong: <span>
                                                @elem.Quantity
                                            </span></p>
                                    </div>
                                </div>
                                <div class="giasanpham">
                                    @if (pro.Discount != 0)
                                    {
                                        <p class="giathat">đ@(pro.Discount * elem.Quantity)
                                        </p>
                                    }
                                    else
                                    {
                                        <p class="giagiam">đ@(pro.ProPrice * elem.Quantity)
                                        </p>
                                    }
                                </div>
                            </div>
                            <!-- END CARD -->
                        }
                    </div>
                    <div class="tongtien">
                        <div class="thongkegia">
                            <p><i class="fa-solid fa-money-bill"></i><span>Thành tiền: </span></p>
                            <span class="giacuoicung">đ @Model.getOrder.TotalPrice</span>
                        </div>
                    </div>
                </div>
            </section>
        </section>
    </main>
</body>

</html>